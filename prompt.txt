I need to refactor the RAG pipeline to support a new Qdrant vector payload schema specifically for Legal Documents (Tenant 1).

**1. Context - New Qdrant Payload Structure:**
I have updated the Qdrant collection. Here is an example of the new vector payload for a Type 1 document (Law):
```json
{
  "text": "Chương VII Mục 2. THỜI GIỜ NGHỈ NGƠI Điều 109. Ngh…",
  "source_id": 1037,
  "file_name": "45_2019_QH14_333670.docx",
  "document_name": "Bộ luật Lao động 2019 (Số 45/2019/QH14)",
  "father_doc_name": "",  // Empty for Type 1, contains Parent Name for Type 2
  "heading1": "Chương VII",
  "heading2": "Mục 2. THỜI GIỜ NGHỈ NGƠI",
  "content": "Điều 109. Nghỉ trong giờ làm việc 1. Người lao độn…",
  "tenant_id": 1,
  "type": 1  // 1 = Law, 2 = Decree
}
2. Task Requirements:

A. Update EmbeddingService:

Ensure the ingestion logic populates these new fields (heading1, heading2, type, father_doc_name) correctly when chunking the documents.

B. Update ChatProcessor (Crucial):

Retrieval Logic for Tenant 1 (Legal Law):

When searching for legal questions (tenant_id = 1), we want to ensure we capture the relationship between Law and Decree.

Logic: Try to retrieve a mix of Type 1 (Law) and Type 2 (Decree) vectors if they are semantically relevant.

Context Formatting:

When constructing the context string for the LLM, you MUST parse the metadata to format the citation clearly.

Format Rule: [Tài liệu: {document_name}] {heading1} - {heading2}: {content}

Note: Map heading1 to "Chương..." and heading2 to "Mục..." as seen in the JSON.

Verification:

The final answer generated by the LLM must be able to reference these headers (e.g., "Theo Chương VII, Mục 2 của Bộ luật Lao động...").

Please modify the code in ChatProcessor and EmbeddingService to implement these changes.