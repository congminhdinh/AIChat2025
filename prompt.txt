Tôi đang thực hiện luận văn tốt nghiệp với đề tài "Ứng dụng Multi-tenant RAG để xây dựng website tra cứu pháp luật". Tôi cần bạn đóng vai trò là một Kiến trúc sư Giải pháp (Solution Architect) để viết nội dung cho Mục 5.2.2: Cơ chế hợp nhất tri thức đa nguồn và phân cấp ngữ cảnh.

Nhiệm vụ:

Phân tích dữ liệu nguồn: Hãy đọc kỹ file 4.2.2_Thiet_ke_lop.md và các Biểu đồ Sequence liên quan đến hội thoại RAG(đặc biệt là lớp ChatProcessor).

Trích xuất Logic Giải pháp: Thay vì mô tả các thuộc tính/phương thức đơn thuần, hãy tập trung vào "Logic đóng góp". Cụ thể là cách hệ thống giải quyết vấn đề "phân mảnh tri thức" bằng cách hợp nhất Nội quy doanh nghiệp (Tenant data) và Luật quốc gia (Global data).

Lập Outline chi tiết: Xây dựng khung nội dung cho Mục 5.2.2 bao gồm:

Nguyên lý lọc đa nguồn (Multi-source Filtering) trên Qdrant.

Thuật toán nhận diện kịch bản (Scenario Detection) và cơ chế dự phòng (Fallback).

Kỹ thuật xây dựng Prompt với ngữ cảnh phân cấp ưu tiên (Hierarchical Context).

Thiết kế Biểu đồ PlantUML: Vẽ 01 biểu đồ mô tả luồng logic của giải pháp này (Solution Logic Flow).

Yêu cầu kỹ thuật cho Biểu đồ:

Terminology 2026: Sử dụng danh từ số ít, không dùng "các/những", giữ nguyên thuật ngữ tiếng Anh số ít (TenantId, Vector, Metadata, Collection, Prompt).

Style: Tối giản, chuyên nghiệp (giống phong cách Draw.io).

Layout: Ưu tiên hướng dọc (Top-Down) để phù hợp với khổ giấy A4, tránh dàn hàng ngang quá rộng.

Nội dung: Tập trung vào luồng xử lý dữ liệu và ra quyết định (Decision Making) thay vì gọi hàm code.