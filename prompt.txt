@workspace Please perform the following steps to update the outline for Chapter 4, Section 4.2.2:

1. **CONTEXT:** I am writing a graduation thesis following HUST standards. Section 4.2.2 (Class Design) requires a length of 3-4 pages, focusing on the detailed description (Attributes/Methods) of 2-4 most important classes and illustrating message flows via Sequence Diagrams.

2. **TASK:** Scan the current project logic, then rewrite/update the file `chapter_4_outline.md`, specifically section **4.2.2. Class Design**.

3. **SPECIFIC LOGIC REQUIREMENTS FOR 4.2.2:**
   Focus ONLY on the following 2 business flows (Use Cases) to extract the class design:

   - **Use Case 1: Document Processing (Chunking & Embedding):**
     * Logic: From the moment `DocumentService` receives the file -> Execute `HierarchicalChunking` -> Push job via Hangfire -> `EmbeddingService` vectorizes -> Save to `Qdrant`.
     * **Classes to design in detail:**
       - `DocumentService` (.NET): File processing methods, chunking logic, and job creation.
       - `EmbeddingHandler` (or equivalent in Python Worker): Batch vectorization handling.

   - **Use Case 2: Legal Q&A (Chat RAG Flow):**
     * Logic: User sends message via `ChatService` (SignalR) -> Push to RabbitMQ -> `ChatProcessor` (Python) receives message -> Execute Hybrid Search & RRF -> Call LLM -> Return result.
     * **Classes to design in detail:**
       - `ChatService` (.NET): Realtime connection handling and event dispatching.
       - `ChatProcessor` (Python): The most critical class containing `hybrid_search`, `detect_scenario`, and `generate_response` logic.

4. **OUTPUT FORMAT (Outline for 4.2.2):**
   Return the updated outline content for this section, including:
   - **A. Detailed Class Specification (Key Classes):** List only the 3-4 key classes mentioned above. For each class, list the most important **Attributes** and **Methods** matching the actual code.
   - **B. Message Flow Design (Sequence Diagrams):** Describe the scenarios for the 2 Use Cases above (e.g., Object A calls Object B method X, returns Y).

   *Note: Do not verbosely describe minor classes (DTOs, simple Entities); focus strictly on Logic Classes (Business/Service Classes).*