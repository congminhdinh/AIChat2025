

Claude Code Refactor Prompt: Professional Event Handling & UI Standard
Objective: Refactor the UI/UX and JavaScript logic for AdminCMS and WebApp projects. Core Reference: You MUST read Claude.md to understand the system prompt and UIShareLogic.txt for AJAX patterns before proceeding.

1. Anti-Double Click & Loading State
Requirement: Implement a global mechanism to prevent multiple form submissions or duplicate AJAX requests.

Technical Implementation: * On button click (Save, Delete, Upload, Vectorize, etc.): Add the Tabler class .btn-loading to the button and set disabled = true.

Once the AJAX request completes (in the always or finally block): Remove the .btn-loading class and re-enable the button.

Ensure this is applied to all action buttons in both projects.

2. Dynamic Path Management (UrlRoot)
Requirement: Standardize how JavaScript files and assets are referenced within Views.

Implementation: * In _Layout.cshtml, initialize a global JavaScript variable const UrlRoot = '@Configuration["WebAppUrl"]'; (ensure @inject IConfiguration is present).

Refactor all <script src="..."> and <link href="..."> tags in all Views.

Replace the tilde ~/ prefix with the UrlRoot variable to ensure assets are correctly fetched from the specified root URL across different environments.

3. Fixing Event Binding (Event Delegation)
Problem: Click events for buttons (Edit, Delete, Pagination) are lost after a Partial View is reloaded via AJAX.

Solution: * Refactor all script files to use Event Delegation.

Use: $(document).on('click', '.btn-selector', function() { ... }); instead of direct .click() binding.

This must apply to all tables, pagination links, and dynamic modal content.

4. Layout & UI Synchronization
Single-Line Header: * Page Title (Left), Search Box, and Action Buttons (Right) must stay on one single line using Flexbox (flex-nowrap).

Scrollable & No Footer: * Remove the Footer from all pages.

The main content area must be scrollable (overflow-y: auto) with a fixed header.

Table Consistency: * Ensure the table structure and CSS classes in Index.cshtml and its _TablePartial.cshtml are identical to prevent "layout jumping" during updates.

Background Stability: * Ensure the background list remains static and does not shift or reset scroll position when a Modal or Detail Partial View is loaded.

5. Component & Iconography
Icon-based Actions: Replace text buttons with SVG Tabler Icons.

Add Bootstrap Tooltips (data-bs-toggle="tooltip") to show the action text on hover.

WebApp Dictionary View: Remove the isActive dropdown from the Enterprise Dictionary configuration page.